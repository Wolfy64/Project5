{% extends "base.html.twig" %}

{% block css %}
    <link rel="stylesheet" href="{{ asset('/nao/css/map/map.css') }}">
{% endblock %}

{% block body %} 

    <h1>Localiser les observations d'oiseaux enregistrés en France</h1>

    {% for message in app.flashes('notice') %}
        <div class="flash-notice">
            {{ message }}
        </div>
    {% endfor %}

    <div>
        <h2>Recherche un oiseau</h2>

        <h3>Espèces</h3>

        {{ form_start(form) }}
            {{ form_errors(form) }}
            {{ form_row(form.commonName,{'label': 'Nom commun de l\'oiseau'}) }}
            <button type="submit">Lancer la recherche</button>
        {{ form_end(form) }}

        <h3>Département</h3>
    </div>

    {% if observations is defined and observations is not empty %} 
        <div>
            <h2>Résultats</h2>
        
            <h3>Votres recherche:</h3>

            <ul>
                <li>{{ observations.0.commonName }}</li>
                <li>Département " A faire plus tard"</li>
            </ul>

            <p>Il y a {{ observations|length }} 
                {% if observations|length > 1 %} résultats {% else %} résultat{% endif %} 
            </p>

            <a href="{{ path('map_show_list') }}">
                Voir {% if observations|length > 1 %} les résultats {% else %} le résultat{% endif %}
            </a>
        
        </div>
    {% else %} 
        <p>Affiche une belle image</p>
        <img src="{{ asset('/img/observations/no_image.png') }}" alt="">
    {% endif %}

    <ul>
        <li>
            <a href="{{ path('list_observations') }}">Liste des observations</a>
        </li>
    </ul>

        <script>
            var input = document.getElementById("map_commonName");
        </script>
    <script src="{{ asset('/awesomplete/awesomplete.js') }}"></script>
{% endblock %}